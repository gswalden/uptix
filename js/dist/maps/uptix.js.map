{"version":3,"sources":["uptix.js","noquery.js","scripts.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","window","u","$","selector","context","document","querySelectorAll","$1","querySelector","jsonp","url","success","xhr","XMLHttpRequest","open","onload","request","response","currentTarget","responseText","JSON","parse","send","css","el","styles","property","style","hasClass","className","classList","contains","RegExp","test","addClass","add","this","removeClass","remove","replace","toggleClass","prepend","parent","insertBefore","firstChild","click","func","addEventListener","make","tag","createElement","substr","id","getRandomInt","min","max","Math","floor","random","Ticker","symbol","price","close","prevPrice","buildEl","setPointers","outputFields","eventHandlers","value","_this","promote","first","forEach","name","child","textContent","appendChild","$symbol","$price","$percent","list","_this2","item","updateSymbol","updatePrice","updatePercentage","currPriceStr","toFixed","prevPriceStr","innerHTML","addSpan","$spans","direction","changed","findChangedDigits","len","indexOf","curr","prev","prevLen","currLen","push","percent","math","string","split","map","char","join","bigTicker","demote","removeChild","allTickers","setInterval","ticker","num","$progress","width","parseInt"],"mappings":"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","file":"uptix.js","sourcesContent":[null,"// A bunch of stuff jquery does, but much lighter\nwindow.u = {\n  $: function(selector, context) {\n    return (context || document).querySelectorAll(selector);\n  },\n  $1: function(selector, context) {\n    return (context || document).querySelector(selector);\n  },\n  jsonp: function(url, success) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.onload = function(request) {\n      var response = request.currentTarget.response || request.target.responseText;\n      response = JSON.parse(response);\n      success(response);\n    };\n    xhr.send();\n    return xhr;\n  },\n  css: function(el, styles) {\n    for (var property in styles)\n      el.style[property] = styles[property];\n  },\n  hasClass: function(el, className) {\n    return el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\n  },\n  addClass: function(el, className) {\n    if (el.classList) el.classList.add(className);\n    else if (!this.hasClass(el, className)) el.className += ' ' + className;\n  },\n  removeClass: function(el, className) {\n    if (el.classList) el.classList.remove(className);\n    else el.className = el.className.replace(new RegExp('\\\\b' + className + '\\\\b', 'g'), '');\n  },\n  toggleClass: function(el, className) {\n    if (this.hasClass(el, className)) this.removeClass(el, className);\n    else this.addClass(el, className);\n  },\n  prepend: function(el, parent) {\n    parent.insertBefore(el, parent.firstChild);\n  },\n  click: function(el, func) {\n    el.addEventListener('click', func);\n  }\n};\n\n","!(function(window, document, u) {\n  class Ticker {\n    constructor(symbol, price, close, el) {\n      this.symbol = symbol;\n      this.price = +price;\n      this.close = +close;\n      this.prevPrice = null;\n      this.el = el || this.buildEl();\n      this.setPointers();\n      this.outputFields();\n      this.eventHandlers();\n    }\n    eventHandlers() {\n      var promote = u.$1('.promote', this.el);\n      if (promote) {\n        u.click(promote, () => {\n          this.promote();\n        });\n      }\n    }\n    buildEl(first) {\n      var el = make('div');\n      el.className = 'ticker';\n      ['symbol', 'promote', 'price', 'percent'].forEach(function(name) {\n        var child = make('.' + name);\n        if (name == 'promote') child.textContent = 'promote';\n        el.appendChild(child);\n      });\n      var parent = u.$1('#more');\n      if (first) {\n        u.prepend(el, parent);\n      } else {\n        parent.appendChild(el);\n      }\n      return el;\n    }\n    setPointers() {\n      this.$symbol = u.$1('.symbol', this.el);\n      this.$price = u.$1('.price', this.el);\n      this.$percent = u.$1('.percent', this.el);\n    }\n    outputFields(list) {\n      if (list) {\n        list.forEach(item => {\n          switch (item) {\n            case 'symbol':\n              this.updateSymbol();\n              break;\n            case 'price':\n              this.updatePrice();\n              break;\n            case 'time':\n              this.updatePercentage();\n              break;\n          }\n        });\n      } else {\n        this.updateSymbol()\n          .updatePrice(this.price, true)\n          .updatePercentage();\n      }\n    }\n    updateSymbol(symbol) {\n      symbol = symbol || this.symbol;\n      this.$symbol.textContent = symbol;\n      return this;\n    }\n    updatePrice(price, first) {\n      if (price != this.price || first) {\n        this.prevPrice = this.price;\n        this.price = +price;\n        var currPriceStr = this.price.toFixed(2);\n        var prevPriceStr = this.prevPrice.toFixed(2);\n        \n        this.$price.innerHTML = this.addSpan(currPriceStr);\n        var $spans = u.$('span', this.$price);\n        var direction = (this.price > this.prevPrice) ? 'up' : 'down';\n        var changed = this.findChangedDigits(currPriceStr, prevPriceStr);\n        var len = $spans.length;\n        while (len--) {\n          if (changed.indexOf(len) > -1) {\n            u.addClass($spans[len], direction);\n          }\n        }\n      }\n      return this;\n    }\n    findChangedDigits(curr, prev) {\n      var changed = [];\n      var prevLen = prev.length;\n      var currLen = curr.length;\n      while (currLen--) {\n        prevLen--;\n        if (/\\d/.test(curr[currLen]) &&\n          (prevLen < 0 || curr[currLen] != prev[prevLen])\n        ) {\n          changed.push(currLen);\n        }\n      }\n      return changed;\n    }\n    updatePercentage() {\n      var percent = (this.price - this.close) / this.close * 100;\n      var math = (percent > 0) ? '+' : '';\n      this.$percent.textContent = math + percent.toFixed(2) + '%';\n      return this;\n    }\n    addSpan(string) {\n      return string.split('').map(function(char) {\n        return '<span>' + char + '</span>';\n      }).join('');\n    }\n    promote() {\n      bigTicker.demote();\n      u.$1('#more').removeChild(this.el);\n      this.el = u.$1('#current');\n      this.setPointers();\n      this.outputFields();\n      bigTicker = this;\n    }\n    demote() {\n      this.el = this.buildEl(true);\n      this.setPointers();\n      this.outputFields();\n      this.eventHandlers();\n      // smallTickers.push(this);\n    }\n  }\n\n  function make(tag) {\n    var el;\n    if (tag[0] == '.') {\n      el = document.createElement('div');\n      el.className = tag.substr(1);\n    } else if (tag[0] == '#') {\n      el = document.createElement('div');\n      el.id = tag.substr(1);\n    } else {\n      el = document.createElement(tag);\n    }\n    return el;\n  }\n  function twoDecimals(num) {\n    return Math.floor(num * 100) / 100;\n  }\n  function getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min)) + min;\n  }\n\n  window.allTickers = [\n    new Ticker('AAPL', 127.42, 127, u.$1('#current')),\n    new Ticker('GOOG', 526.23, 526.4),\n    new Ticker('TSLA', 256, 256),\n    new Ticker('SSYS', 37.06, 37.9),\n    new Ticker('MSFT', 45.65, 45.6)\n  ];\n  window.bigTicker = allTickers[0];\n\n  setInterval(function() {\n    allTickers.forEach(function(ticker) {\n      var price = ticker.price;\n      var num = getRandomInt(0, 2);\n      if (num === 1) {\n        price += 0.01;\n      } else {\n        price -= 0.01;\n      }\n      ticker.updatePrice(price).updatePercentage();\n    });\n  }, 1000);\n\n  var $progress = u.$1('#progress');\n  setInterval(function() {\n    var width = parseInt($progress.style.width.replace('%', ''), 10) || 0;\n    width += 1;\n    if (width > 100) width = 0;\n    $progress.style.width = width + '%';\n    u.$1('#time-text span').textContent = width;\n  }, 1200);\n})(window, document, window.u);\n"],"sourceRoot":"/source/"}