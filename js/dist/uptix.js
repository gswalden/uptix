"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();window.u={$:function(e,t){return(t||document).querySelectorAll(e)},$1:function(e,t){return(t||document).querySelector(e)},jsonp:function(e,t){var i=new XMLHttpRequest;return i.open("GET",e),i.onload=function(e){var i=e.currentTarget.response||e.target.responseText;i=JSON.parse(i),t(i)},i.send(),i},css:function(e,t){for(var i in t)e.style[i]=t[i]},hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)},addClass:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")},toggleClass:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},prepend:function(e,t){t.insertBefore(e,t.firstChild)},click:function(e,t){e.addEventListener("click",t)}},!function(e,t,i){function n(e){var i;return"."==e[0]?(i=t.createElement("div"),i.className=e.substr(1)):"#"==e[0]?(i=t.createElement("div"),i.id=e.substr(1)):i=t.createElement(e),i}function s(e,t){return Math.floor(Math.random()*(t-e))+e}var r=function(){function e(t,i,n,s){_classCallCheck(this,e),this.symbol=t,this.price=+i,this.close=+n,this.prevPrice=null,this.el=s||this.buildEl(),this.setPointers(),this.outputFields(),this.eventHandlers()}return _createClass(e,[{key:"eventHandlers",value:function(){var e=this,t=i.$1(".promote",this.el);t&&i.click(t,function(){e.promote()})}},{key:"buildEl",value:function(e){var t=n("div");t.className="ticker",["symbol","promote","price","percent"].forEach(function(e){var i=n("."+e);"promote"==e&&(i.textContent="promote"),t.appendChild(i)});var s=i.$1("#more");return e?i.prepend(t,s):s.appendChild(t),t}},{key:"setPointers",value:function(){this.$symbol=i.$1(".symbol",this.el),this.$price=i.$1(".price",this.el),this.$percent=i.$1(".percent",this.el)}},{key:"outputFields",value:function(e){var t=this;e?e.forEach(function(e){switch(e){case"symbol":t.updateSymbol();break;case"price":t.updatePrice();break;case"time":t.updatePercentage()}}):this.updateSymbol().updatePrice(this.price,!0).updatePercentage()}},{key:"updateSymbol",value:function(e){return e=e||this.symbol,this.$symbol.textContent=e,this}},{key:"updatePrice",value:function(e,t){if(e!=this.price||t){this.prevPrice=this.price,this.price=+e;var n=this.price.toFixed(2),s=this.prevPrice.toFixed(2);this.$price.innerHTML=this.addSpan(n);for(var r=i.$("span",this.$price),a=this.price>this.prevPrice?"up":"down",c=this.findChangedDigits(n,s),o=r.length;o--;)c.indexOf(o)>-1&&i.addClass(r[o],a)}return this}},{key:"findChangedDigits",value:function(e,t){for(var i=[],n=t.length,s=e.length;s--;)n--,/\d/.test(e[s])&&(0>n||e[s]!=t[n])&&i.push(s);return i}},{key:"updatePercentage",value:function(){var e=(this.price-this.close)/this.close*100,t=e>0?"+":"";return this.$percent.textContent=t+e.toFixed(2)+"%",this}},{key:"addSpan",value:function(e){return e.split("").map(function(e){return"<span>"+e+"</span>"}).join("")}},{key:"promote",value:function(){bigTicker.demote(),i.$1("#more").removeChild(this.el),this.el=i.$1("#current"),this.setPointers(),this.outputFields(),bigTicker=this}},{key:"demote",value:function(){this.el=this.buildEl(!0),this.setPointers(),this.outputFields(),this.eventHandlers()}}]),e}();e.allTickers=[new r("AAPL",127.42,127,i.$1("#current")),new r("GOOG",526.23,526.4),new r("TSLA",256,256),new r("SSYS",37.06,37.9),new r("MSFT",45.65,45.6)],e.bigTicker=allTickers[0],setInterval(function(){allTickers.forEach(function(e){var t=e.price,i=s(0,2);1===i?t+=.01:t-=.01,e.updatePrice(t).updatePercentage()})},1e3);var a=i.$1("#progress");setInterval(function(){var e=parseInt(a.style.width.replace("%",""),10)||0;e+=1,e>100&&(e=0),a.style.width=e+"%",i.$1("#time-text span").textContent=e},1200)}(window,document,window.u);
//# sourceMappingURL=maps/uptix.js.map